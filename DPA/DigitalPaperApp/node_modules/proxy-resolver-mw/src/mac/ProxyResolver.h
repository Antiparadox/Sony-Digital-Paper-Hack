//
//  ProxyResolver.h
//
//  Copyright 2016 Sony Corporation
//

#pragma once


#import <CoreFoundation/CoreFoundation.h>
#include <string>


class ProxyResolver
{
public:
	static std::string GetProxy(
                                /*[in]*/ const std::string& targetUrl,
                                /*[in]*/ const std::string& userAgent,
                                /*[out]*/ std::string& proxy
                                );

private:
    static std::string GetProxyFromDictionary(
                                              /*[in]*/ const CFURLRef targetUrl,
                                              /*[in]*/ const CFDictionaryRef proxyDic,
                                              /*[out]*/ std::string& proxy
                                              );
    
    static std::string GetProxyByAutoConfigurationURL(
                                                      /*[in]*/ const CFURLRef targetUrl,
                                                      /*[in]*/ const CFURLRef pacUrl,
                                                      /*[out]*/ std::string& proxy
                                                      );
    
    static std::string GetProxyByAutoConfigurationScript(
                                                         /*[in]*/ const CFURLRef targetUrl,
                                                         /*[in]*/ const CFStringRef pacScript,
                                                         /*[out]*/ std::string& proxy
                                                         );
    static std::string GetProxyServerString(
                                            /*[in]*/ const CFDictionaryRef proxyDic,
                                            /*[out]*/ std::string& proxy
                                            );
};

