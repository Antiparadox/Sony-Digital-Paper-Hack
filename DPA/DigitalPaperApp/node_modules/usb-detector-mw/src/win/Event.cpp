//
//  Event.cpp
//
//  Copyright 2016 Sony Corporation
//

#include "../Event.h"
#include "../Log.h"
#include "WinErrorCode.h"

Event::Event()
{
	hEvent = ::CreateEvent(
		/* lpEventAttributes = */	NULL,
		/* bManualReset = */		FALSE,
		/* bInitialState = */		FALSE,
		/* lpName = */				NULL
		);
	if (!hEvent) {
		LOG_ERROR(_T("::CreateEvent() failed. [%S]"), WinErrorCode::GetLastError().c_str());
	}
}

Event::~Event()
{
	if (hEvent) {
		::CloseHandle(hEvent);
		hEvent = nullptr;
	}
}

void Event::Wait() {
	::WaitForSingleObject(hEvent, INFINITE);
}

void Event::Signal() {
	::SetEvent(hEvent);
}