process.env.DEBUG = "error,error:*";

'use strict';

//var UsbDetector = require('node-usb-detector');
var UsbDetector = require('../index.js');

const detector = new UsbDetector();

detector.on('start:' + 0x054C, function (device) {
  console.log('\nonStarted\n', device);
});

detector.on('add:' + 0x054C, function (device) {
  console.log('\nonAdded\n', device);
});

detector.on('remove:' + 0x054C, function (device) {
  console.log('\nonRemoved\n', device);
});

detector.start(0x054C, function (error, deviceArray) {
  if (error) {
    console.log('\nstart\n', error);
    return;
  }
  console.log('\nstart\n', deviceArray);
});


setTimeout(function () {
  detector.find(0x054C, function onFind(error, deviceArray) {
    if (error) {
      console.log('\nfind\n', error);
      return;
    }
    console.log('\nfind\n', deviceArray);
  });

  detector.count(0x054C, function onCount(error, count) {
    if (error) {
      console.log('\ncount\n', error);
      return;
    }
    console.log('\ncount\n', count);
  });

  detector.stop(function (error) {
    if (error) {
      console.log('\nstop\n', error);
      return;
    }
    console.log('\nstop\n');
  });
}, 10000);

