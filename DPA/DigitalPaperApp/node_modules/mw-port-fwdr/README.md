MilkyWay Port Forwarder (mw-port-fwdr)
====================

Port Forwardを実現するModule

Module Functions
--------------------

* ElectronからのTCP/IP通信を指定したDenebに転送する
  * Local Loopback Addressの未使用のPort番号を転送元のPort番号として選
    択する。
  * 呼び出し元から指定されたIPアドレスおよびPort番号に対して、Moduleが
    選択したLocal Loopback AddressのPort番号を接続する。
  * 呼び出し元に、Moduleが選択したPort番号を返答する。

Module API
--------------------

* [interface](doc/interface.md)


Module Main Dependencies
--------------------

* [dependencies](doc/dependencies.md)


説明補足
--------------------

* Electronおよび、それが抱えるChromiumからはXHRで通信する場合(下記図*B)、
  Scope IDが必要なIPv6 Link Local Addressのにアクセスはできない。それ
  に対する対策のためのモジュール。

  * USB接続されたDenebには、IPv6 Link Local Addressで接続する必要があ
    る。
  
  * そのため、Electron/ChromiumからXHRを利用してWeb APIを呼び出す接続
    先をLocal Loopback Address(下記図*B)とし、
    その接続を、USBで直接接続されたDenebのIPv6 Link Local Addressへと
    転送する。
    
* 接続図概略

  <pre>
  [Deneb]
    | Host: toIpAddr, Port: toPort (*A)
    |
    | HTTP(S)/TCP/IP接続
    |
    | 
  [Altair / Local Port Forwerder]
    | Host: getHostName(), Port: getHttpPort(), getHttpsPot() (*B)
    |   
    | HTTP(S)/TCP/IP接続(PC内部)
    |
    | 
  [Altair / Electron Renderer Process]
  </pre>

* Electron Renderer上のUI実装からは、mw-conn-ctrl の getBaseURL(),
  getHttpPort(), getHttpsPort()を呼び出すことで、Web APIを呼び出す宛先
  のLocal Loopback AddressとPort番号を取得する。

* 現状の設計では、Deneb直結のUSB-Ether以外のIP接続でも、本モジュールを
  利用してWeb APIの呼び出しを行う。

  * これは、Electron Renderer上からのXHRの実際の接続先(上記図*A)を、
    Renderer Processの再起動無しに、切り替えを行うために利用している。
