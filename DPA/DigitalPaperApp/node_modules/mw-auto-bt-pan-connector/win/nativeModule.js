'use strict';

const logE = require('debug')('mw-auto-bt-pan-connector:win:nativeModule:error');
const logD = require('debug')('mw-auto-bt-pan-connector:win:nativeModule:debug');

const testModulePostfix = process.env.TEST_MODULE_POSTFIX ? process.env.TEST_MODULE_POSTFIX : '';
const btPairingModuleName = 'bt-pairing-mw' + testModulePostfix;
const btPanModuleName = 'bt-pan-mw' + testModulePostfix;

var BtPairingModule = undefined;
var BtPanModule = undefined;
var BtPanStatusConnected = undefined;

try {
    BtPairingModule = require(btPairingModuleName);
    BtPanModule = require(btPanModuleName);
    BtPanStatusConnected = BtPanModule.SBluetoothPan.prototype.S_BT_PAN_STATUS.S_BT_PAN_STATUS_CONNECTED;
} catch (ex) {
    logE('Failed to require native Bluetooth modules. %o', ex);
    BtPairingModule = undefined;
    BtPanModule = undefined;
    BtPanStatusConnected = undefined;
}

module.exports = {
    BtPairingModule: BtPairingModule,
    BtPanModule: BtPanModule,
    BtPanStatus: {
        Connected: BtPanStatusConnected
    }
};
